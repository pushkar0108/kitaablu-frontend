{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport MOMENT from \"moment\";\nimport { Http } from \"../../../src/Services/API/Http\";\n\nconst EntityUpdate = ({\n  lastUpdatedAt,\n  hideUpdateButton = false,\n  entityType,\n  entityId\n}) => {\n  const {\n    0: showAlert,\n    1: updateShowAlert\n  } = useState(false);\n  useEffect(() => {\n    /* tslint:disable-next-line */\n    $(function () {\n      /* tslint:disable-next-line */\n      $('[data-toggle=\"tooltip\"]').tooltip();\n    });\n    $('[data-toggle=\"tooltip\"]').tooltip({\n      trigger: 'hover'\n    });\n  });\n  const entityUpdateAllowed = MOMENT().diff(MOMENT(lastUpdatedAt), 'days') > 7;\n\n  const handleClick = async () => {\n    try {\n      await Http.Request('POST', `v1/entity/${entityType}/update/${entityId}`);\n      updateShowAlert(true);\n      setTimeout(() => {\n        updateShowAlert(false);\n      }, 4000);\n    } catch (error) {}\n  };\n\n  return __jsx(\"div\", {\n    className: \"mt-3\"\n  }, __jsx(\"div\", {\n    className: \"tool-tip\",\n    \"data-toggle\": \"tooltip\",\n    \"data-placement\": \"right\",\n    title: entityUpdateAllowed ? \"Click here to raise an updation request\" : \"Information is already upto date, cannot raise request\"\n  }, !hideUpdateButton && __jsx(\"button\", {\n    onClick: handleClick,\n    disabled: !entityUpdateAllowed,\n    type: \"button\",\n    className: \"btn btn-secondary btn-sm btn-block\"\n  }, \"Request Data Updation\")), __jsx(\"div\", {\n    className: \"mt-2 ml-1\"\n  }, __jsx(\"div\", null, \"Info last updated on \"), __jsx(\"div\", null, MOMENT(lastUpdatedAt).format(\"MMMM Do, YYYY\"))), showAlert && __jsx(\"div\", {\n    className: \"mt-2 alert alert-warning alert-dismissible fade show\",\n    role: \"alert\"\n  }, __jsx(\"strong\", null, \"Request Raised Successfully!\"), \" We will try to update the data as soon as possible, Kindly check after few minutes.\"));\n};\n\nexport { EntityUpdate };","map":null,"metadata":{},"sourceType":"module"}